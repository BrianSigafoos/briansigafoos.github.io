<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><title>Code Review best practices - Brian Sigafoos</title><link rel=stylesheet href="/css/main.min.67f30afe326a13bc9b404bcb6c7069ec605ce918aa5102a8d63934b4e0b8fac4.css" integrity="sha256-Z/MK/jJqE7ybQEvLbHBp7GBc6RiqUQKo1jk0tOC4+sQ="><script src=/main.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-42740116-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<link rel="shortcut icon" href=/favicon.png?20190809><link rel=apple-touch-icon href=/apple-touch-icon.png?20190809></head><body data-controller=color-scheme class="text-color bg-bright antialiased leading-normal"><div class="border-b border-gray py-4 w-full"><div class="container max-w-4xl"><div class="flex items-center justify-between font-mono"><a href=https://briansigafoos.com/ class="text-primary font-extrabold">Brian Sigafoos</a><div class="flex items-center"><a href=/about class="text-color font-extrabold block">About me</a><div class="flex ml-4"><button type=button data-action=color-scheme#toggleScheme aria-label="Toggle dark mode" title="Toggle dark mode" class="py-1 px-2 cursor-pointer text-color"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg></button>
<button type=button data-action=color-scheme#toggleColor aria-label="Change primary color" title="Change primary color" class="py-1 px-2 cursor-pointer text-primary"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828.0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg></button></div></div></div></div></div><div class="container my-12 md:my-16 !max-w-4xl prose md:prose-lg lg:prose-xl prose-custom"><h1>Code Review best practices</h1><p class="mt-4 text-lg md:text-xl lg:text-2xl text-muted">Follow clear guidelines for code review to help improve code quality and products</p><div class="font-mono text-sm mt-3 space-x-4"><span class=text-muted>Jul 23, 2022</span>
<span class=text-muted>4 min read</span></div><div class="border-t border-gray my-8 pt-4"><p>This is a condensed and lightly remixed version of Google&rsquo;s must-read <a href=https://google.github.io/eng-practices/review/>Code Review Developer Guide</a>.</p><h2 id=why-review>Why review</h2><p>The purpose of code review is to make sure code quality increases over time and to keep delivering value to customers/stakeholders.</p><p>Why do we review each other&rsquo;s code?</p><ul><li>Quality</li><li>Knowledge sharing</li><li>Consistency</li></ul><h2 id=what-to-look-for>What to look for</h2><p>Code reviews should look at:</p><ul><li><strong>Design</strong><ul><li>Is the code well-designed and appropriate for your system? Does it meet the requirements from Product on the attached ticket?</li></ul></li><li><strong>Functionality</strong><ul><li>Does the code behave as the author likely intended? Is the way the code behaves good for its users?</li></ul></li><li><strong>Complexity</strong><ul><li>Could the code be made simpler? Would another developer be able to easily understand and use this code when they come across it in the future?</li></ul></li><li><strong>Tests</strong><ul><li>Does the code have correct and well-designed automated tests?</li></ul></li><li><strong>Naming</strong><ul><li>Did the developer choose clear names for variables, classes, methods, etc.?</li></ul></li><li><strong>Comments</strong><ul><li>Are the comments clear and useful? Are they needed?</li><li>Usually to explain <strong>why</strong> some code exists, not <strong>what</strong> it is doing. If the code isn’t clear enough to explain itself, then the code should be made simpler.</li></ul></li><li><strong>Style</strong><ul><li>Does the code follow our style guides?</li></ul></li><li><strong>Consistency</strong><ul><li>Does it follow the existing pattern? If it creates a new pattern, are we updating docs to point to this new pattern adding a tech debt issue to clean up the existing code?</li></ul></li><li><strong>Documentation</strong><ul><li>Did the developer also update relevant documentation?</li></ul></li></ul><h2 id=principles>Principles</h2><p>Follow these key principles, in order:</p><ul><li>Technical facts and data overrule opinions and personal preferences</li><li>On matters of style, the language&rsquo;s style guide is the authority (<a href=/linters>automate all linting</a>)<ul><li>If not covered in the style guide, be consistent with the existing code&rsquo;s style</li><li>If no existing code/style, accept the author&rsquo;s</li></ul></li><li>If the author can demonstrate that several approaches are equally valid, then the reviewer should accept the preference of the author. Otherwise, the choice is dictated by standard principles of software design.</li><li>If no other rule applies, then the reviewer may ask the author to be consistent with what is in the current codebase</li></ul><h2 id=how-to-write-code-review-comments>How to write code review comments</h2><p>When reviewing someone else&rsquo;s code, always assume competence and goodwill.</p><p>Try to always:</p><ul><li>Be kind</li><li>Be curious</li><li>Explain your reasoning</li><li>Balance giving explicit directions with just pointing out problems and letting the developer decide</li><li>Encourage developers to simplify code, not just explain it in comments</li></ul><p>When reviewing someone else&rsquo;s code, always assume competence and goodwill.</p><p>Critique the code and never the person. Some examples:</p><ul><li>BAD: &ldquo;Why did you do X this way, when there&rsquo;s no real benefit?&rdquo;</li><li>GOOD: &ldquo;This way it is done using X doesn&rsquo;t seem to provide any benefit. Because there&rsquo;s no benefit, it&rsquo;s best for this code to be rewritten with Y&rdquo;.</li></ul><p>If you see something clearly wrong, it most likely comes from a lack of information, not from an inability. Use the opportunity to explain, teach, and lead to correct solutions.</p><p>If you see something you like, you can comment on that as well. Learn something new? Let them know. Encourage more great code/change by praising it.</p><h2 id=how-to-write-a-good-changelist--pull-request-for-code-authors>How to write a good changelist / pull request (for code authors)</h2><p>The first sentence of a changelist (pull request) describes <strong>what’s</strong> actually being done.</p><p>The rest of the description explains <strong>why</strong> the change is being made and gives the reviewer a lot of context.</p><p>First Line tips:</p><ul><li>Short summary of what is being done.</li><li>Complete sentence, written as though it was an order (imperative sentence)</li><li>Follow by empty line.</li></ul><p>Some examples:</p><ul><li>BAD: &ldquo;Deleting the FizzBuzz RPC and replacing it with the new system&rdquo;</li><li>GOOD: &ldquo;Delete the FizzBuzz RPC and replace it with the new system&rdquo;</li></ul><p>Remember that the changelist description is a public record of what change is being made and why it was made. It will become a permanent part of our version control history, and will possibly be read by hundreds of people other than your reviewers over the years.</p><h2 id=how-to-handle-reviewer-comments-for-code-authors>How to handle reviewer comments (for code authors)</h2><p>Remember:</p><ul><li>Don’t take it personally<ul><li>The goal of code review is to improve the quality of our code and products</li></ul></li><li>Fix the code<ul><li>If the reviewer doesn&rsquo;t understand something, usually the best course is to improve the code&rsquo;s clarity</li></ul></li><li>Think collaboratively<ul><li>Do you understand what the reviewer is asking for? If not, ask for clarification.</li><li>If you disagree, do so with courtesy and respect, while discussing the pros/cons of different approaches</li><li>Try to come to a consensus based on technical facts</li><li>Ask for in-person, or video, discussion and document the result as a code review comment</li></ul></li></ul><h2 id=references>References</h2><ul><li><a href=https://google.github.io/eng-practices/review/>Code Review Developer Guide by Google</a></li><li><a href=https://chromium.googlesource.com/chromium/src/+/master/docs/cr_respect.md>Respectful Code Reviews</a></li></ul><div class="border-t border-b border-gray text-muted my-8 py-4">Read more posts like this in the
<a href=/software-engineering-toolbox>Software Engineering Toolbox</a> collection.</div></div><div class=my-8><a href=https://briansigafoos.com/ class="text-base inline-block mb-1 py-2 px-6 cursor-pointer font-mono font-bold text-primary border border-solid border-primary bg-bright no-underline">Visit homepage</a></div><div class=my-8><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//briansigafoos.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class="border-t border-gray py-4 my-16 w-full text-sm text-faint"><div class="container max-w-4xl text-center font-mono"><div class="sm:flex items-center justify-between"><span>Made with
<a href=https://gohugo.io rel=nofollow target=hugo class=underline>Hugo</a> &
        <a href=https://tailwindcss.com rel=nofollow target=tw class=underline>TailwindCSS</a>
·
<a href=https://github.com/BrianSigafoos/hugo_site rel=nofollow target=source class=underline>Source code</a></span>
<span class="block sm:inline mt-2 sm:mt-0">By <a href=/about class="text-primary font-black">Brian Sigafoos</a></span></div></div></div></body></html>