<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><title>Language syntax review - Brian Sigafoos</title><link rel=stylesheet href="/css/main.min.b2e9e37f1f1f29069ea31873433a546c6c9bc06754625faf1f8b64b845495485.css" integrity="sha256-sunjfx8fKQaeoxhzQzpUbGybwGdUYl+vH4tkuEVJVIU="><script src=/main.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-42740116-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<link rel="shortcut icon" href=/favicon.png?20190809><link rel=apple-touch-icon href=/apple-touch-icon.png?20190809></head><body data-controller=color-scheme class="text-color bg-bright antialiased leading-normal"><div class="border-b border-gray py-4 w-full"><div class="container max-w-4xl"><div class="flex items-center justify-between font-mono"><a href=https://briansigafoos.com/ class="text-primary font-extrabold">Brian Sigafoos</a><div class="flex items-center"><a href=/about class="text-color font-extrabold block">About me</a><div class="flex ml-4"><button type=button data-action=color-scheme#toggleScheme aria-label="Toggle dark mode" title="Toggle dark mode" class="py-1 px-2 cursor-pointer text-color"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg></button>
<button type=button data-action=color-scheme#toggleColor aria-label="Change primary color" title="Change primary color" class="py-1 px-2 cursor-pointer text-primary"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828.0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/></svg></button></div></div></div></div></div><div class="container my-12 md:my-16 !max-w-4xl prose md:prose-lg lg:prose-xl prose-custom"><h1>Language syntax review</h1><p class="mt-4 text-lg md:text-xl lg:text-2xl text-muted">Quick review of basic syntax for Go, Javascript, Ruby, Rails, and SQL</p><div class="font-mono text-sm mt-3 space-x-4"><span class=text-muted>Jul 16, 2020</span>
<span class=text-muted>15 min read</span></div><div class="border-t border-gray my-8 pt-4"><p>Jump to <a href=#go>Go</a> 路 <a href=#javascript>Javascript</a> 路 <a href=#rails>Rails</a> 路 <a href=#ruby>Ruby</a> 路 <a href=#sql>SQL</a></p><hr><h3 id=go>Go</h3><h4 id=basics-of-go>Basics of Go</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#6ab825;font-weight:700>var</span> x <span style=color:#6ab825;font-weight:700>int</span> <span style=color:#999;font-style:italic>// Variable declaration. Variables must be declared before use.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>x = <span style=color:#3677a9>3</span>     <span style=color:#999;font-style:italic>// Variable assignment.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// &#34;Short&#34; declarations use := to infer the type, declare, and assign.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>y := <span style=color:#3677a9>4</span>
</span></span><span style=display:flex><span>sum, prod := <span style=color:#447fcf>learnMultiple</span>(x, y)        <span style=color:#999;font-style:italic>// Function returns two values.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;sum:&#34;</span>, sum, <span style=color:#ed9d13>&#34;prod:&#34;</span>, prod) <span style=color:#999;font-style:italic>// Simple output.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>func</span> <span style=color:#447fcf>learnMultiple</span>(x, y <span style=color:#6ab825;font-weight:700>int</span>) (sum, prod <span style=color:#6ab825;font-weight:700>int</span>) {
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>return</span> x + y, x * y <span style=color:#999;font-style:italic>// Return two values.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#999;font-style:italic>// Arrays have size fixed at compile time.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>var</span> a4 [<span style=color:#3677a9>4</span>]<span style=color:#6ab825;font-weight:700>int</span>           <span style=color:#999;font-style:italic>// An array of 4 ints, initialized to all 0.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// An array initialized with a fixed size of five
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// elements, with values 3, 1, 5, 10, and 100.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>a5 := [...]<span style=color:#6ab825;font-weight:700>int</span>{<span style=color:#3677a9>3</span>, <span style=color:#3677a9>1</span>, <span style=color:#3677a9>5</span>, <span style=color:#3677a9>10</span>, <span style=color:#3677a9>100</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Slices have dynamic size. Arrays and slices each have advantages
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// but use cases for slices are much more common.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>s3 := []<span style=color:#6ab825;font-weight:700>int</span>{<span style=color:#3677a9>4</span>, <span style=color:#3677a9>5</span>, <span style=color:#3677a9>9</span>}    <span style=color:#999;font-style:italic>// Compare to a5. No ellipsis here.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>s4 := <span style=color:#24909d>make</span>([]<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#3677a9>4</span>)    <span style=color:#999;font-style:italic>// Allocates slice of 4 ints, initialized to all 0.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>var</span> d2 [][]<span style=color:#6ab825;font-weight:700>float64</span>      <span style=color:#999;font-style:italic>// Declaration only, nothing allocated here.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>bs := []<span style=color:#24909d>byte</span>(<span style=color:#ed9d13>&#34;a slice&#34;</span>) <span style=color:#999;font-style:italic>// Type conversion syntax.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Slices (as well as maps and channels) have reference semantics.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>s3_cpy := s3            <span style=color:#999;font-style:italic>// Both variables point to the same instance.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>s3_cpy[<span style=color:#3677a9>0</span>] = <span style=color:#3677a9>0</span>           <span style=color:#999;font-style:italic>// Which means both are updated.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>fmt.<span style=color:#447fcf>Println</span>(s3_cpy[<span style=color:#3677a9>0</span>] == s3[<span style=color:#3677a9>0</span>]) <span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Because they are dynamic, slices can be appended to on-demand.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// To append elements to a slice, the built-in append() function is used.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// First argument is a slice to which we are appending. Commonly,
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// the array variable is updated in place, as in example below.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>s := []<span style=color:#6ab825;font-weight:700>int</span>{<span style=color:#3677a9>1</span>, <span style=color:#3677a9>2</span>, <span style=color:#3677a9>3</span>}     <span style=color:#999;font-style:italic>// Result is a slice of length 3.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>s = <span style=color:#24909d>append</span>(s, <span style=color:#3677a9>4</span>, <span style=color:#3677a9>5</span>, <span style=color:#3677a9>6</span>)  <span style=color:#999;font-style:italic>// Added 3 elements. Slice now has length of 6.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>fmt.<span style=color:#447fcf>Println</span>(s) <span style=color:#999;font-style:italic>// Updated slice is now [1 2 3 4 5 6]
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// To append another slice, instead of list of atomic elements we can
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// pass a reference to a slice or a slice literal like this, with a
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// trailing ellipsis, meaning take a slice and unpack its elements,
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// appending them to slice s.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>s = <span style=color:#24909d>append</span>(s, []<span style=color:#6ab825;font-weight:700>int</span>{<span style=color:#3677a9>7</span>, <span style=color:#3677a9>8</span>, <span style=color:#3677a9>9</span>}...) <span style=color:#999;font-style:italic>// Second argument is a slice literal.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>fmt.<span style=color:#447fcf>Println</span>(s)  <span style=color:#999;font-style:italic>// Updated slice is now [1 2 3 4 5 6 7 8 9]
</span></span></span></code></pre></div><h4 id=flow-control-in-go>Flow Control in Go</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#999;font-style:italic>// No parentheses for if / else
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>if</span> x &gt; y {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>} <span style=color:#6ab825;font-weight:700>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Like if, for doesn&#39;t use parens either.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Variables declared in for and if are local to their scope.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>for</span> x := <span style=color:#3677a9>0</span>; x &lt; <span style=color:#3677a9>3</span>; x++ { <span style=color:#999;font-style:italic>// ++ is a statement.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>  fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;iteration&#34;</span>, x)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// You can use range to iterate over an array, a slice, a string, a map, or a channel.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// range returns one (channel) or two values (array, slice, string and map).
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>hashMap := <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]<span style=color:#6ab825;font-weight:700>int</span>{<span style=color:#ed9d13>&#34;one&#34;</span>: <span style=color:#3677a9>1</span>, <span style=color:#ed9d13>&#34;two&#34;</span>: <span style=color:#3677a9>2</span>, <span style=color:#ed9d13>&#34;three&#34;</span>: <span style=color:#3677a9>3</span>}
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>for</span> key, value := <span style=color:#6ab825;font-weight:700>range</span> hashMap {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// for each pair in the map, print key and value
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>  fmt.<span style=color:#447fcf>Printf</span>(<span style=color:#ed9d13>&#34;key=%s, value=%d\n&#34;</span>, key, value)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// If you only need the value, use the underscore as the key
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>names := []<span style=color:#6ab825;font-weight:700>string</span>{<span style=color:#ed9d13>&#34;Bob&#34;</span>, <span style=color:#ed9d13>&#34;Bill&#34;</span>, <span style=color:#ed9d13>&#34;Joe&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>for</span> _, name := <span style=color:#6ab825;font-weight:700>range</span> names {
</span></span><span style=display:flex><span>  fmt.<span style=color:#447fcf>Printf</span>(<span style=color:#ed9d13>&#34;Hello, %s\n&#34;</span>, name)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>for</span> { <span style=color:#999;font-style:italic>// Infinite loop.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>  <span style=color:#6ab825;font-weight:700>break</span>    <span style=color:#999;font-style:italic>// Just kidding.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>  <span style=color:#6ab825;font-weight:700>continue</span> <span style=color:#999;font-style:italic>// Unreached.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>}
</span></span></code></pre></div><h4 id=references-for-go>References for Go</h4><ul><li><a href=https://learnxinyminutes.com/docs/go/>Learn Go in Y Minutes</a></li><li><a href=https://go.dev/tour>A Tour of Go</a></li></ul><p>Jump to <a href=#go>Go</a> 路 <a href=#javascript>Javascript</a> 路 <a href=#rails>Rails</a> 路 <a href=#ruby>Ruby</a> 路 <a href=#sql>SQL</a></p><hr><h3 id=javascript>Javascript</h3><h4 id=basics-of-javascript>Basics of Javascript</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#999;font-style:italic>// The &#34;var&#34; keyword, function scope aka hoisted to top.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>var</span> someVar = <span style=color:#3677a9>5</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// The &#34;let&#34; keyword allows you to define variables in a lexical scope (block),
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// as opposed to a function scope like the var keyword does.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>let</span> name = <span style=color:#ed9d13>&#39;Billy&#39;</span>
</span></span><span style=display:flex><span>name = <span style=color:#ed9d13>&#39;William&#39;</span> <span style=color:#999;font-style:italic>// Can do this
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// The &#34;const&#34; keyword allows you to define a variable in a lexical scope
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// like with let, but you cannot reassign the value once one has been assigned.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>const</span> pi = <span style=color:#3677a9>3.14</span>
</span></span><span style=display:flex><span>pi = <span style=color:#3677a9>4.13</span> <span style=color:#999;font-style:italic>// Can NOT do this
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// There&#39;s shorthand for performing math operations on variables:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>someVar += <span style=color:#3677a9>5</span> <span style=color:#999;font-style:italic>// equivalent to someVar = someVar + 5; someVar is 10 now
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>someVar *= <span style=color:#3677a9>10</span> <span style=color:#999;font-style:italic>// now someVar is 100
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// and an even-shorter-hand for adding or subtracting 1
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>someVar++ <span style=color:#999;font-style:italic>// now someVar is 101
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>someVar-- <span style=color:#999;font-style:italic>// back to 100
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Strings
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#ed9d13>&#39;hello&#39;</span>.length <span style=color:#999;font-style:italic>// 5
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#ed9d13>&#39;hello&#39;</span>.charAt(<span style=color:#3677a9>0</span>) <span style=color:#999;font-style:italic>// &#34;h&#34;
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#ed9d13>&#39;hello, world&#39;</span>.replace(<span style=color:#ed9d13>&#39;world&#39;</span>, <span style=color:#ed9d13>&#39;mars&#39;</span>) <span style=color:#999;font-style:italic>// &#34;hello, mars&#34;
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#ed9d13>&#39;hello&#39;</span>.toUpperCase() <span style=color:#999;font-style:italic>// &#34;HELLO&#34;
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Gotchas
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>//
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#3677a9>3</span> / <span style=color:#3677a9>2</span> <span style=color:#999;font-style:italic>// 1.5, not 1
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#24909d>Math</span>.floor(<span style=color:#3677a9>3</span> / <span style=color:#3677a9>2</span>) <span style=color:#999;font-style:italic>// 1
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#3677a9>0.1</span> + <span style=color:#3677a9>0.2</span> == <span style=color:#3677a9>0.30000000000000004</span> <span style=color:#999;font-style:italic>// Floats
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Avoid type coercion, use the triple-equals operator:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#3677a9>123</span> === <span style=color:#ed9d13>&#39;123&#39;</span> <span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#3677a9>1</span> === <span style=color:#6ab825;font-weight:700>true</span> <span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// vs
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#3677a9>123</span> == <span style=color:#ed9d13>&#39;123&#39;</span> <span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#3677a9>1</span> == <span style=color:#6ab825;font-weight:700>true</span> <span style=color:#999;font-style:italic>// true
</span></span></span></code></pre></div><h4 id=flow-control-in-javascript>Flow Control in Javascript</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#6ab825;font-weight:700>if</span> (count === <span style=color:#3677a9>3</span>) {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// evaluated if count is 3
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>} <span style=color:#6ab825;font-weight:700>else</span> <span style=color:#6ab825;font-weight:700>if</span> (count === <span style=color:#3677a9>4</span>) {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// evaluated if count is 4
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>} <span style=color:#6ab825;font-weight:700>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// evaluated if it&#39;s not either 3 or 4
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>while</span> (stack.length !== <span style=color:#3677a9>0</span>) {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Basic for loop
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// initialization; continue condition; iteration.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>for</span> (<span style=color:#6ab825;font-weight:700>let</span> i = <span style=color:#3677a9>0</span>; i &lt; <span style=color:#3677a9>5</span>; i++) {
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// will run 5 times
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// The for/in statement allows iteration over properties of an object.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>let</span> description = <span style=color:#ed9d13>&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>let</span> person = { first: <span style=color:#ed9d13>&#39;Paul&#39;</span>, last: <span style=color:#ed9d13>&#39;Ken&#39;</span>, age: <span style=color:#3677a9>18</span> }
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>for</span> (<span style=color:#6ab825;font-weight:700>let</span> x <span style=color:#6ab825;font-weight:700>in</span> person) {
</span></span><span style=display:flex><span>  description += person[x] + <span style=color:#ed9d13>&#39; &#39;</span>
</span></span><span style=display:flex><span>} <span style=color:#999;font-style:italic>// description = &#39;Paul Ken 18 &#39;
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// The for/of statement allows iteration over iterable objects (including the built-in String,
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Array, e.g. the Array-like arguments or NodeList objects, TypedArray, Map and Set,
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// and user-defined iterables).
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>let</span> myPets = <span style=color:#ed9d13>&#39;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>let</span> pets = [<span style=color:#ed9d13>&#39;cat&#39;</span>, <span style=color:#ed9d13>&#39;dog&#39;</span>, <span style=color:#ed9d13>&#39;hamster&#39;</span>, <span style=color:#ed9d13>&#39;hedgehog&#39;</span>]
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>for</span> (<span style=color:#6ab825;font-weight:700>let</span> pet <span style=color:#6ab825;font-weight:700>of</span> pets) {
</span></span><span style=display:flex><span>  myPets += pet + <span style=color:#ed9d13>&#39; &#39;</span>
</span></span><span style=display:flex><span>} <span style=color:#999;font-style:italic>// myPets = &#39;cat dog hamster hedgehog &#39;
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Same for strings `let char of x`
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>const</span> cache = {}
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>let</span> string = <span style=color:#ed9d13>&#39;abcd&#39;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Count character frequency
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>for</span> (<span style=color:#6ab825;font-weight:700>let</span> <span style=color:#6ab825;font-weight:700>char</span> <span style=color:#6ab825;font-weight:700>of</span> string) {
</span></span><span style=display:flex><span>  cache[<span style=color:#6ab825;font-weight:700>char</span>] = (cache[<span style=color:#6ab825;font-weight:700>char</span>] || <span style=color:#3677a9>0</span>) + <span style=color:#3677a9>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=hash-maps-in-javascript>Hash Maps in Javascript</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#6ab825;font-weight:700>const</span> cache = <span style=color:#6ab825;font-weight:700>new</span> Map()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cache.set(<span style=color:#ed9d13>&#39;a&#39;</span>, <span style=color:#3677a9>1</span>) <span style=color:#999;font-style:italic>// Set key and value
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>cache.has(<span style=color:#ed9d13>&#39;a&#39;</span>) <span style=color:#999;font-style:italic>// Key exists?
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>cache.get(<span style=color:#ed9d13>&#39;a&#39;</span>) <span style=color:#999;font-style:italic>// Get value or `undefined`
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>cache.<span style=color:#6ab825;font-weight:700>delete</span>(<span style=color:#ed9d13>&#39;a&#39;</span>) <span style=color:#999;font-style:italic>// Delete element by key, returns true on success, or false if not found
</span></span></span></code></pre></div><h4 id=arrays-in-javascript>Arrays in Javascript</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#6ab825;font-weight:700>const</span> array1 = [<span style=color:#3677a9>1</span>, <span style=color:#3677a9>2</span>, <span style=color:#3677a9>3</span>];
</span></span><span style=display:flex><span>array1.includes(<span style=color:#3677a9>2</span>)) <span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>array1.includes(<span style=color:#3677a9>3</span>)) <span style=color:#999;font-style:italic>// false
</span></span></span></code></pre></div><p>Stacks and Queues</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#999;font-style:italic>// Stacks (LIFO)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>const</span> stack = []
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>while</span> (stack.length !== <span style=color:#3677a9>0</span>) {
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>let</span> a = stack.pop()
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>  stack.push(b)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Queues (FIFO)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>const</span> queue = []
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>while</span> (queue.length !== <span style=color:#3677a9>0</span>) {
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>let</span> a = queue.shift()
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>  queue.push(b)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// More
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>const</span> queue2 = [<span style=color:#3677a9>1</span>, <span style=color:#3677a9>2</span>]
</span></span><span style=display:flex><span>queue2.unshift(<span style=color:#3677a9>0</span>) <span style=color:#999;font-style:italic>// result of the call is 3, which is the new array length
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// queue2 is [0, 1, 2]
</span></span></span></code></pre></div><h4 id=es6-additions>ES6 Additions</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#999;font-style:italic>// There is a new syntax for functions in ES6 known as &#34;lambda syntax&#34;.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// This allows functions to be defined in a lexical scope like with variables
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// defined by const and let.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>const</span> isEven = (number) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>return</span> number % <span style=color:#3677a9>2</span> === <span style=color:#3677a9>0</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>isEven(<span style=color:#3677a9>7</span>) <span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// The &#34;equivalent&#34; of this function in the traditional syntax would look like this:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>function</span> isEven(number) {
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>return</span> number % <span style=color:#3677a9>2</span> === <span style=color:#3677a9>0</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=api-call-and-parse-json-in-javascript>API Call and Parse JSON in Javascript</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#999;font-style:italic>// Using node-fetch since fetch() included in NodeJS 17.5+ only
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>import</span> fetch from <span style=color:#ed9d13>&#39;node-fetch&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>let</span> API_URL_WITH_PARAMS = <span style=color:#ed9d13>&#39;https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Current approach - Fetch API
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>fetch(API_URL_WITH_PARAMS)
</span></span><span style=display:flex><span>  .then((response) =&gt; response.json())
</span></span><span style=display:flex><span>  .then((data) =&gt; console.log(data))
</span></span><span style=display:flex><span>  .<span style=color:#6ab825;font-weight:700>catch</span>((error) =&gt; console.log(error))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Old approach - XMLHttpRequest
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>//
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// function reqListener() {
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>//   console.log(this.responseText)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// }
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// var oReq = new XMLHttpRequest()
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// oReq.addEventListener(&#39;load&#39;, reqListener)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// oReq.open(&#39;GET&#39;, API_URL_WITH_PARAMS)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// oReq.send()
</span></span></span></code></pre></div><h4 id=test-setup>Test Setup</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#999;font-style:italic>// Using &#34;jest&#34; in package.json
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>import</span> { twoSum, isValid } from <span style=color:#ed9d13>&#39;./solution&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>test(<span style=color:#ed9d13>&#39;twoSum&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>  expect(twoSum([<span style=color:#3677a9>2</span>, <span style=color:#3677a9>7</span>, <span style=color:#3677a9>11</span>], <span style=color:#3677a9>9</span>)).toEqual([<span style=color:#3677a9>0</span>, <span style=color:#3677a9>1</span>])
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>test(<span style=color:#ed9d13>&#39;isValid&#39;</span>, () =&gt; {
</span></span><span style=display:flex><span>  expect(isValid(<span style=color:#ed9d13>&#39;{([])}&#39;</span>)).toBe(<span style=color:#6ab825;font-weight:700>true</span>)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h4 id=references-for-javascript>References for Javascript</h4><ul><li><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript>MDN Javascript</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide>MDN Javascript Guide</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/A_re-introduction_to_JavaScript>A Re-introduction to Javascript</a></li><li><a href=https://learnxinyminutes.com/docs/javascript/>Learn Javascript in Y Minutes</a></li></ul><p>Jump to <a href=#go>Go</a> 路 <a href=#javascript>Javascript</a> 路 <a href=#rails>Rails</a> 路 <a href=#ruby>Ruby</a> 路 <a href=#sql>SQL</a></p><hr><h3 id=ruby>Ruby</h3><h4 id=basics-of-ruby>Basics of Ruby</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># In Ruby, (almost) everything is an object.</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># This includes numbers...</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>3</span>.class <span style=color:#999;font-style:italic>#=&gt; Integer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Some basic arithmetic</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>1</span> + <span style=color:#3677a9>1</span> <span style=color:#999;font-style:italic>#=&gt; 2</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>8</span> - <span style=color:#3677a9>1</span> <span style=color:#999;font-style:italic>#=&gt; 7</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>10</span> * <span style=color:#3677a9>2</span> <span style=color:#999;font-style:italic>#=&gt; 20</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>35</span> / <span style=color:#3677a9>5</span> <span style=color:#999;font-style:italic>#=&gt; 7</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>2</span> ** <span style=color:#3677a9>5</span> <span style=color:#999;font-style:italic>#=&gt; 32</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>5</span> % <span style=color:#3677a9>3</span> <span style=color:#999;font-style:italic>#=&gt; 2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Bitwise operators</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>3</span> &amp; <span style=color:#3677a9>5</span> <span style=color:#999;font-style:italic>#=&gt; 1</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>3</span> | <span style=color:#3677a9>5</span> <span style=color:#999;font-style:italic>#=&gt; 7</span>
</span></span><span style=display:flex><span><span style=color:#3677a9>3</span> ^ <span style=color:#3677a9>5</span> <span style=color:#999;font-style:italic>#=&gt; 6</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Create array with max distance</span>
</span></span><span style=display:flex><span>cache = <span style=color:#40ffff>Hash</span>.new(<span style=color:#3677a9>0</span>)
</span></span><span style=display:flex><span>cache = <span style=color:#24909d>Array</span>.new(size, <span style=color:#3677a9>0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Matrix m x n size, use rows and cols are the size of each, for clarity</span>
</span></span><span style=display:flex><span>rows = matrix.size
</span></span><span style=display:flex><span>cols = matrix[<span style=color:#3677a9>0</span>].size
</span></span><span style=display:flex><span>output = <span style=color:#24909d>Array</span>.new(rows).map { <span style=color:#24909d>Array</span>.new(cols, <span style=color:#3677a9>0</span>) }
</span></span></code></pre></div><h4 id=more-ruby>More Ruby</h4><p>To quickly create a hash map in Ruby 2.7+ use the <code>#tally</code> method</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># Ruby 2.7+</span>
</span></span><span style=display:flex><span>cache = s.chars.tally
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># vs</span>
</span></span><span style=display:flex><span>cache = s.chars.each_with_object(<span style=color:#40ffff>Hash</span>.new(<span style=color:#3677a9>0</span>)) { |v, h| h[v] += <span style=color:#3677a9>1</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># vs</span>
</span></span><span style=display:flex><span>cache = <span style=color:#40ffff>Hash</span>.new(<span style=color:#3677a9>0</span>)
</span></span><span style=display:flex><span>s.chars.each { |c| cache[c] += <span style=color:#3677a9>1</span> }
</span></span></code></pre></div><h4 id=flow-control-in-ruby>Flow Control in Ruby</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># The `do |variable| ... end` construct above is called a &#39;block&#39;. Blocks are similar</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># to lambdas, anonymous functions or closures in other programming languages. They can</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># be passed around as objects, called, or attached as methods.</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># The &#39;each&#39; method of a range runs the block once for each element of the range.</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># The block is passed a counter as a parameter.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># You can also surround blocks in curly brackets.</span>
</span></span><span style=display:flex><span>(<span style=color:#3677a9>1</span>..<span style=color:#3677a9>5</span>).each { |counter| <span style=color:#24909d>puts</span> <span style=color:#ed9d13>&#34;iteration </span><span style=color:#ed9d13>#{</span>counter<span style=color:#ed9d13>}</span><span style=color:#ed9d13>&#34;</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># The contents of data structures can also be iterated using each.</span>
</span></span><span style=display:flex><span>array.each <span style=color:#6ab825;font-weight:700>do</span> |element|
</span></span><span style=display:flex><span>  <span style=color:#24909d>puts</span> <span style=color:#ed9d13>&#34;</span><span style=color:#ed9d13>#{</span>element<span style=color:#ed9d13>}</span><span style=color:#ed9d13> is part of the array&#34;</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span><span style=color:#24909d>hash</span>.each <span style=color:#6ab825;font-weight:700>do</span> |key, value|
</span></span><span style=display:flex><span>  <span style=color:#24909d>puts</span> <span style=color:#ed9d13>&#34;</span><span style=color:#ed9d13>#{</span>key<span style=color:#ed9d13>}</span><span style=color:#ed9d13> is </span><span style=color:#ed9d13>#{</span>value<span style=color:#ed9d13>}</span><span style=color:#ed9d13>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># If you still need an index you can use &#39;each_with_index&#39; and define an index</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># variable.</span>
</span></span><span style=display:flex><span>array.each_with_index <span style=color:#6ab825;font-weight:700>do</span> |element, index|
</span></span><span style=display:flex><span>  <span style=color:#24909d>puts</span> <span style=color:#ed9d13>&#34;</span><span style=color:#ed9d13>#{</span>element<span style=color:#ed9d13>}</span><span style=color:#ed9d13> is number </span><span style=color:#ed9d13>#{</span>index<span style=color:#ed9d13>}</span><span style=color:#ed9d13> in the array&#34;</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>counter = <span style=color:#3677a9>1</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>while</span> counter &lt;= <span style=color:#3677a9>5</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>  <span style=color:#24909d>puts</span> <span style=color:#ed9d13>&#34;iteration </span><span style=color:#ed9d13>#{</span>counter<span style=color:#ed9d13>}</span><span style=color:#ed9d13>&#34;</span>
</span></span><span style=display:flex><span>  counter += <span style=color:#3677a9>1</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span></code></pre></div><h4 id=hash-maps-in-ruby>Hash Maps in Ruby</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># Hashes are Ruby&#39;s primary dictionary with key/value pairs.</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Hashes are denoted with curly braces.</span>
</span></span><span style=display:flex><span>cache = { }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cache[<span style=color:#ed9d13>&#39;a&#39;</span>] = <span style=color:#3677a9>1</span>    <span style=color:#999;font-style:italic># Set key and value</span>
</span></span><span style=display:flex><span>cache.key?(<span style=color:#ed9d13>&#39;a&#39;</span>)   <span style=color:#999;font-style:italic># Key exists?</span>
</span></span><span style=display:flex><span>cache[<span style=color:#ed9d13>&#39;a&#39;</span>]        <span style=color:#999;font-style:italic># Get value or `nil`</span>
</span></span><span style=display:flex><span>cache.delete(<span style=color:#ed9d13>&#39;a&#39;</span>) <span style=color:#999;font-style:italic># Delete element by key, returns value on success or `nil` if  not found</span>
</span></span></code></pre></div><h4 id=arrays-in-ruby>Arrays in Ruby</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>array1 = [<span style=color:#3677a9>1</span>, <span style=color:#3677a9>2</span>, <span style=color:#3677a9>3</span>]
</span></span><span style=display:flex><span>array1.include?(<span style=color:#3677a9>1</span>) <span style=color:#999;font-style:italic># true</span>
</span></span><span style=display:flex><span>array1.include?(<span style=color:#3677a9>4</span>) <span style=color:#999;font-style:italic># false</span>
</span></span></code></pre></div><p>Stacks and Queues in Ruby</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># Stacks (LIFO)</span>
</span></span><span style=display:flex><span>stack = []
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>until</span> stack.empty?
</span></span><span style=display:flex><span>  a = stack.pop
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># ...</span>
</span></span><span style=display:flex><span>  stack.append(b) <span style=color:#999;font-style:italic># Alias for .push</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Queues (FIFO)</span>
</span></span><span style=display:flex><span>queue = []
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>until</span> queue.empty?
</span></span><span style=display:flex><span>  a = queue.shift
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># ...</span>
</span></span><span style=display:flex><span>  queue.append(b)
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># More</span>
</span></span><span style=display:flex><span>queue.unshift(c) <span style=color:#999;font-style:italic># Prepend to array (aliased as .prepend)</span>
</span></span></code></pre></div><h4 id=regex-in-ruby>Regex in Ruby</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ed9d13>&#39;帽&#39;</span>.match?(<span style=color:#ed9d13>/[A-Za-z]/</span>)     <span style=color:#999;font-style:italic>#=&gt; false</span>
</span></span><span style=display:flex><span><span style=color:#ed9d13>&#39;帽&#39;</span>.match?(<span style=color:#ed9d13>/\w/</span>)           <span style=color:#999;font-style:italic>#=&gt; false</span>
</span></span><span style=display:flex><span><span style=color:#ed9d13>&#39;帽&#39;</span>.match?(<span style=color:#ed9d13>/[[:alpha:]]/</span>)  <span style=color:#999;font-style:italic>#=&gt; true</span>
</span></span></code></pre></div><h4 id=api-call-and-parse-json-in-ruby>API Call and Parse JSON in Ruby</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># A simple review of Ruby&#39;s built in net/http, uri, and json libraries</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># used to make API requests and parse the JSON response.</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># require &#39;pry&#39;</span>
</span></span><span style=display:flex><span><span style=color:#24909d>require</span> <span style=color:#ed9d13>&#39;uri&#39;</span>
</span></span><span style=display:flex><span><span style=color:#24909d>require</span> <span style=color:#ed9d13>&#39;net/http&#39;</span>
</span></span><span style=display:flex><span><span style=color:#24909d>require</span> <span style=color:#ed9d13>&#39;json&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Option 1 - include params in GET request</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># API_URL_WITH_PARAMS = &#39;https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&#39;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># uri = URI(API_URL_WITH_PARAMS)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Option 2 - construct query with dynamic params</span>
</span></span><span style=display:flex><span><span style=color:#40ffff>API_URL</span> = <span style=color:#ed9d13>&#39;https://api.nasa.gov/planetary/apod&#39;</span>
</span></span><span style=display:flex><span>uri = <span style=color:#40ffff>URI</span>(<span style=color:#40ffff>API_URL</span>)
</span></span><span style=display:flex><span>params = { <span style=color:#ed9d13>api_key</span>: <span style=color:#ed9d13>&#39;DEMO_KEY&#39;</span> }
</span></span><span style=display:flex><span>uri.query = <span style=color:#40ffff>URI</span>.encode_www_form(params)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>res = <span style=color:#40ffff>Net</span>::<span style=color:#40ffff>HTTP</span>.get_response(uri)
</span></span><span style=display:flex><span>parsed = <span style=color:#40ffff>JSON</span>.parse(res.body)
</span></span><span style=display:flex><span><span style=color:#24909d>puts</span> parsed
</span></span></code></pre></div><h4 id=test-setup-1>Test Setup</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#24909d>require</span> <span style=color:#ed9d13>&#39;minitest/autorun&#39;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># require &#39;pry&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>class</span> <span style=color:#447fcf;text-decoration:underline>TestSolution</span> &lt; <span style=color:#40ffff>Minitest</span>::<span style=color:#40ffff>Test</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>test_t1</span>
</span></span><span style=display:flex><span>    assert_equal [<span style=color:#3677a9>0</span>, <span style=color:#3677a9>1</span>], two_sum([<span style=color:#3677a9>2</span>, <span style=color:#3677a9>7</span>, <span style=color:#3677a9>11</span>], <span style=color:#3677a9>9</span>)
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span></code></pre></div><h4 id=references-for-ruby>References for Ruby</h4><ul><li><a href=https://ruby-doc.org/core-3.1.2/>Core Docs</a><ul><li><a href=https://ruby-doc.org/core-3.1.2/Hash.html>Hash</a></li><li><a href=https://ruby-doc.org/core-3.1.2/Array.html>Array</a></li></ul></li><li><a href=https://learnxinyminutes.com/docs/ruby/>Learn Ruby in Y Minutes</a></li></ul><p>Jump to <a href=#go>Go</a> 路 <a href=#javascript>Javascript</a> 路 <a href=#rails>Rails</a> 路 <a href=#ruby>Ruby</a> 路 <a href=#sql>SQL</a></p><hr><h3 id=rails>Rails</h3><h3 id=activerecord>ActiveRecord</h3><h4 id=using-group-sql-group-by>Using .group(&mldr;) SQL <code>GROUP BY</code></h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># Return hash of top 3 city_id&#39;s AND counts</span>
</span></span><span style=display:flex><span><span style=color:#40ffff>Account</span>.subscribed.group(<span style=color:#ed9d13>:city_id</span>).order(<span style=color:#ed9d13>&#39;count_id desc&#39;</span>).limit(<span style=color:#3677a9>3</span>).count(<span style=color:#ed9d13>&#39;id&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># SELECT</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#   COUNT(&#34;accounts&#34;.&#34;id&#34;) AS count_id,</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#   &#34;accounts&#34;.&#34;city_id&#34; AS accounts_city_id</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># WHERE &#34;accounts&#34;.&#34;subscribed&#34; = TRUE</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># GROUP BY &#34;accounts&#34;.&#34;city_id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># ORDER BY count_id desc</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># LIMIT 3</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># =&gt; {2551=&gt;99, 1001=&gt;95, 9800=&gt;89}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Return hash of top 3 city names AND counts</span>
</span></span><span style=display:flex><span><span style=color:#40ffff>Account</span>.subscribed.joins(<span style=color:#ed9d13>:city</span>).group(<span style=color:#ed9d13>&#39;cities.name&#39;</span>).order(<span style=color:#ed9d13>&#39;count_id desc&#39;</span>).limit(<span style=color:#3677a9>3</span>).count(<span style=color:#ed9d13>&#39;id&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># SELECT</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#   COUNT(&#34;accounts&#34;.&#34;id&#34;) AS count_id,</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#   &#34;cities&#34;.&#34;name&#34;        AS cities_name</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># FROM &#34;accounts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#   INNER JOIN &#34;cities&#34; ON &#34;cities&#34;.&#34;id&#34; = &#34;accounts&#34;.&#34;city_id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># WHERE &#34;accounts&#34;.&#34;subscribed&#34; = TRUE</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># GROUP BY &#34;cities&#34;.&#34;name&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># ORDER BY count_id desc</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># LIMIT 3</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># =&gt; {&#34;New York&#34;=&gt;99, &#34;London&#34;=&gt;95, &#34;Sydney&#34;=&gt;89}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Return top 3 city records without counts (could do same above, with counts if desired)</span>
</span></span><span style=display:flex><span><span style=color:#40ffff>City</span>.joins(<span style=color:#ed9d13>:accounts</span>).where(<span style=color:#ed9d13>&#39;accounts.subscribed = TRUE&#39;</span>).group(<span style=color:#ed9d13>:id</span>).order(<span style=color:#ed9d13>&#39;count(accounts.id) desc&#39;</span>).limit(<span style=color:#3677a9>3</span>)
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># SELECT &#34;cities&#34;.*</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># FROM &#34;cities&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#   LEFT OUTER JOIN &#34;accounts&#34; ON &#34;accounts&#34;.&#34;city_id&#34; = &#34;cities&#34;.&#34;id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># WHERE (accounts.subscribed = TRUE)</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># GROUP BY &#34;cities&#34;.&#34;id&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># ORDER BY count(accounts.id) desc</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># LIMIT 3</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># =&gt; [#&lt;City...&gt;,#&lt;City...&gt;,#&lt;City...&gt;,]</span>
</span></span></code></pre></div><h4 id=generators>Generators</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>rails generate &lt;type&gt; --help <span style=color:#999;font-style:italic># for examples</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Model (+ migration, test, fixtures)</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># rails generate model NAME [field[:type][:index] field[:type][:index]] [options]</span>
</span></span><span style=display:flex><span>rails generate model post <span style=color:#ed9d13>title</span>:string <span style=color:#ed9d13>blog</span>:references <span style=color:#ed9d13>published</span>:boolean <span style=color:#ed9d13>position</span>:integer
</span></span><span style=display:flex><span>rails generate model product <span style=color:#ed9d13>supplier</span>:references{polymorphic}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Migration</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># rails generate migration NAME [field[:type][:index] field[:type][:index]] [options]</span>
</span></span><span style=display:flex><span>rails generate migration <span style=color:#40ffff>AddTitlePublishedToPost</span> <span style=color:#ed9d13>title</span>:string <span style=color:#ed9d13>published</span>:boolean
</span></span></code></pre></div><h4 id=models-code-order-preference>Models code order (preference)</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#6ab825;font-weight:700>class</span> <span style=color:#447fcf;text-decoration:underline>User</span> &lt; <span style=color:#40ffff>ApplicationRecord</span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># concerns first</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825>include</span> <span style=color:#40ffff>HasUniqueIdentifier</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># default scope (if any, hopefully none)</span>
</span></span><span style=display:flex><span>  default_scope { where(<span style=color:#ed9d13>active</span>: <span style=color:#6ab825>true</span>) }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># constants</span>
</span></span><span style=display:flex><span>  <span style=color:#40ffff>GENDERS</span> = { <span style=color:#ed9d13>unknown</span>: <span style=color:#3677a9>0</span>, <span style=color:#ed9d13>female</span>: <span style=color:#3677a9>1</span>, <span style=color:#ed9d13>male</span>: <span style=color:#3677a9>2</span>, <span style=color:#ed9d13>non_binary</span>: <span style=color:#3677a9>3</span>, <span style=color:#ed9d13>not_disclosed</span>: <span style=color:#3677a9>4</span> }.freeze
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># attr related macros</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825>attr_accessor</span> <span style=color:#ed9d13>:formatted_date_of_birth</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># enums after attr macros, prefer the hash syntax (GENDERS constant is a hash)</span>
</span></span><span style=display:flex><span>  enum <span style=color:#ed9d13>gender_enum</span>: <span style=color:#40ffff>GENDERS</span>, <span style=color:#ed9d13>_prefix</span>: <span style=color:#ed9d13>:gender</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># association macros</span>
</span></span><span style=display:flex><span>  belongs_to <span style=color:#ed9d13>:country</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  has_many <span style=color:#ed9d13>:authentications</span>, <span style=color:#ed9d13>dependent</span>: <span style=color:#ed9d13>:destroy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># validation macros</span>
</span></span><span style=display:flex><span>  validates <span style=color:#ed9d13>:email</span>,
</span></span><span style=display:flex><span>            <span style=color:#ed9d13>:username</span>, <span style=color:#ed9d13>presence</span>: <span style=color:#6ab825>true</span>
</span></span><span style=display:flex><span>  validates <span style=color:#ed9d13>:username</span>, <span style=color:#ed9d13>uniqueness</span>: { <span style=color:#ed9d13>case_sensitive</span>: <span style=color:#6ab825>false</span> } }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># callbacks</span>
</span></span><span style=display:flex><span>  after_create  <span style=color:#ed9d13>:accept_latest_terms!</span>,    <span style=color:#6ab825;font-weight:700>unless</span>: <span style=color:#ed9d13>:created_by_invite?</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># scopes</span>
</span></span><span style=display:flex><span>  scope <span style=color:#ed9d13>:published</span>, -&gt; { where(<span style=color:#ed9d13>published</span>: <span style=color:#6ab825>true</span>) }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># delegations</span>
</span></span><span style=display:flex><span>  delegate <span style=color:#ed9d13>:currency</span>, <span style=color:#ed9d13>to</span>: <span style=color:#ed9d13>:country</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># class methods</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf;text-decoration:underline>self</span>.<span style=color:#447fcf>by_email</span>(email)
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic># ...</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># instance methods</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>name</span>
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic># ...</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825>private</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#999;font-style:italic># callback methods</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>accept_latest_terms!</span>
</span></span><span style=display:flex><span>    <span style=color:#999;font-style:italic># ...</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span></code></pre></div><h4 id=routes>Routes</h4><ul><li>Try to always use <a href=https://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default>&ldquo;resourceful&rdquo; routes in Rails</a></li><li>Always write routing tests/specs first, with the same code change as the routes themselves</li></ul><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># config/routes.rb</span>
</span></span><span style=display:flex><span><span style=color:#40ffff>Rails</span>.application.routes.draw <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>  resources <span style=color:#ed9d13>:networks</span>, <span style=color:#ed9d13>only</span>: [] <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>    resources <span style=color:#ed9d13>:devices</span>
</span></span><span style=display:flex><span>    resource <span style=color:#ed9d13>:topology</span>, <span style=color:#ed9d13>only</span>: <span style=color:#ed9d13>:show</span> <span style=color:#999;font-style:italic># singular &#34;show&#34;-only route</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  namespace <span style=color:#ed9d13>:app</span> <span style=color:#6ab825;font-weight:700>do</span>                 <span style=color:#999;font-style:italic># namespace adds module (folder) AND prefix &#39;/app&#39; to URI</span>
</span></span><span style=display:flex><span>    scope <span style=color:#ed9d13>&#39;:account_slug&#39;</span> <span style=color:#6ab825;font-weight:700>do</span>        <span style=color:#999;font-style:italic># scope just adds prefix :account_slug to URI</span>
</span></span><span style=display:flex><span>      resources <span style=color:#ed9d13>:messages</span>, <span style=color:#ed9d13>only</span>: %i[index edit]
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  scope <span style=color:#ed9d13>module</span>: <span style=color:#ed9d13>:billing</span> <span style=color:#6ab825;font-weight:700>do</span>         <span style=color:#999;font-style:italic># scope module adds module (folder) only, no prefix to URI</span>
</span></span><span style=display:flex><span>    resources <span style=color:#ed9d13>:plans</span>, <span style=color:#ed9d13>only</span>: <span style=color:#ed9d13>:index</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Produces:</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#              Prefix Verb   URI Pattern                                      Controller#Action</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#     network_devices GET    /networks/:network_id/devices(.:format)          devices#index</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#                     POST   /networks/:network_id/devices(.:format)          devices#create</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#  new_network_device GET    /networks/:network_id/devices/new(.:format)      devices#new</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># edit_network_device GET    /networks/:network_id/devices/:id/edit(.:format) devices#edit</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#      network_device GET    /networks/:network_id/devices/:id(.:format)      devices#show</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#                     PATCH  /networks/:network_id/devices/:id(.:format)      devices#update</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#                     PUT    /networks/:network_id/devices/:id(.:format)      devices#update</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#                     DELETE /networks/:network_id/devices/:id(.:format)      devices#destroy</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#    network_topology GET    /networks/:network_id/topology(.:format)         topologies#show</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#        app_messages GET    /app/:account_slug/messages(.:format)            app/messages#index</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#    edit_app_message GET    /app/:account_slug/messages/:id/edit(.:format)   app/messages#edit</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#               plans GET    /plans(.:format)                                 billing/plans#index</span>
</span></span></code></pre></div><p>Example tests</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#999;font-style:italic># spec/routing/devices_routing_spec.rb</span>
</span></span><span style=display:flex><span><span style=color:#24909d>require</span> <span style=color:#ed9d13>&#39;rails_helper&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#40ffff>RSpec</span>.describe <span style=color:#40ffff>DevicesController</span>, <span style=color:#ed9d13>type</span>: <span style=color:#ed9d13>:routing</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>  describe <span style=color:#ed9d13>&#39;routing&#39;</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>    it <span style=color:#ed9d13>&#39;routes to #show&#39;</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>      expect(<span style=color:#ed9d13>get</span>: <span style=color:#ed9d13>&#39;/networks/1/devices/2&#39;</span>).to route_to(<span style=color:#ed9d13>&#39;devices#show&#39;</span>, <span style=color:#ed9d13>network_id</span>: <span style=color:#ed9d13>&#39;1&#39;</span>, <span style=color:#24909d>id</span>: <span style=color:#ed9d13>&#39;2&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    it <span style=color:#ed9d13>&#39;routes to #new&#39;</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>      expect(<span style=color:#ed9d13>get</span>: <span style=color:#ed9d13>&#39;/networks/1/devices/new&#39;</span>).to route_to(<span style=color:#ed9d13>&#39;devices#new&#39;</span>, <span style=color:#ed9d13>network_id</span>: <span style=color:#ed9d13>&#39;1&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    it <span style=color:#ed9d13>&#39;routes to #create&#39;</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>      expect(<span style=color:#ed9d13>post</span>: <span style=color:#ed9d13>&#39;/networks/1/devices&#39;</span>).to route_to(<span style=color:#ed9d13>&#39;devices#create&#39;</span>, <span style=color:#ed9d13>network_id</span>: <span style=color:#ed9d13>&#39;1&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    it <span style=color:#ed9d13>&#39;routes to #update&#39;</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>      expect(<span style=color:#ed9d13>put</span>:   <span style=color:#ed9d13>&#39;/networks/1/devices/2&#39;</span>).to route_to(<span style=color:#ed9d13>&#39;devices#update&#39;</span>, <span style=color:#ed9d13>network_id</span>: <span style=color:#ed9d13>&#39;1&#39;</span>, <span style=color:#24909d>id</span>: <span style=color:#ed9d13>&#39;2&#39;</span>)
</span></span><span style=display:flex><span>      expect(<span style=color:#ed9d13>patch</span>: <span style=color:#ed9d13>&#39;/networks/1/devices/2&#39;</span>).to route_to(<span style=color:#ed9d13>&#39;devices#update&#39;</span>, <span style=color:#ed9d13>network_id</span>: <span style=color:#ed9d13>&#39;1&#39;</span>, <span style=color:#24909d>id</span>: <span style=color:#ed9d13>&#39;2&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    it <span style=color:#ed9d13>&#39;routes to #destroy&#39;</span> <span style=color:#6ab825;font-weight:700>do</span>
</span></span><span style=display:flex><span>      expect(<span style=color:#ed9d13>delete</span>: <span style=color:#ed9d13>&#39;/networks/1/devices/id123&#39;</span>).to route_to(<span style=color:#ed9d13>&#39;devices#destroy&#39;</span>, <span style=color:#ed9d13>network_id</span>: <span style=color:#ed9d13>&#39;1&#39;</span>, <span style=color:#24909d>id</span>: <span style=color:#ed9d13>&#39;id123&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>end</span>
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>end</span>
</span></span></code></pre></div><h4 id=references-for-rails>References for Rails</h4><ul><li><a href=https://guides.rubyonrails.org/>Rails Guides</a></li></ul><p>Jump to <a href=#go>Go</a> 路 <a href=#javascript>Javascript</a> 路 <a href=#rails>Rails</a> 路 <a href=#ruby>Ruby</a> 路 <a href=#sql>SQL</a></p><hr><h3 id=sql>SQL</h3><h4 id=basics-of-sql>Basics of SQL</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#999;font-style:italic>-- Always use syntax that explicitly lists column order when inserting data
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>INSERT</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>INTO</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>weather<span style=color:#666> </span>(city,<span style=color:#666> </span>temp_lo,<span style=color:#666> </span>temp_hi,<span style=color:#666> </span>prcp,<span style=color:#666> </span><span style=color:#24909d>date</span>)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>VALUES</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>(<span style=color:#ed9d13>&#39;San Francisco&#39;</span>,<span style=color:#666> </span><span style=color:#3677a9>43</span>,<span style=color:#666> </span><span style=color:#3677a9>57</span>,<span style=color:#666> </span><span style=color:#3677a9>0</span>.<span style=color:#3677a9>0</span>,<span style=color:#666> </span><span style=color:#ed9d13>&#39;1994-11-29&#39;</span>);<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>-- Aggregate
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>city,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>max</span>(temp_lo)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>weather<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>GROUP</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>BY</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>city;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>-- Filter grouped rows, using HAVING
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>city,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>max</span>(temp_lo)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>weather<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>GROUP</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>BY</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>city<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>HAVING</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>max</span>(temp_lo)<span style=color:#666> </span>&lt;<span style=color:#666> </span><span style=color:#3677a9>40</span>;<span style=color:#666>
</span></span></span></code></pre></div><h4 id=advanced-sql>Advanced SQL</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#999;font-style:italic>-- Find duplicates using having count(*) &gt; 1
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>count</span>(*)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>duplicate_reports_count,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>day_id,<span style=color:#666> </span>receiver_name,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>domain</span>,<span style=color:#666> </span>account_slug,<span style=color:#666> </span>identifier<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>table_name</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>group</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>day_id,<span style=color:#666> </span>receiver_name,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>domain</span>,<span style=color:#666> </span>account_slug,<span style=color:#666> </span>identifier<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>having</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>count</span>(*)<span style=color:#666> </span>&gt;<span style=color:#666> </span><span style=color:#3677a9>1</span>;<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>-- Example of case statement, to_char() to format float as a percent.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>day_id,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>case</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>        </span><span style=color:#6ab825;font-weight:700>when</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>sum</span>(passing_count)<span style=color:#666> </span>/<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>sum</span>(messages_count)::<span style=color:#24909d>float</span><span style=color:#666> </span>&gt;=<span style=color:#666> </span><span style=color:#3677a9>0</span>.<span style=color:#3677a9>95</span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>then</span><span style=color:#666> </span><span style=color:#ed9d13>&#39;passing&#39;</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>        </span><span style=color:#6ab825;font-weight:700>when</span><span style=color:#666> </span>(<span style=color:#6ab825;font-weight:700>sum</span>(passing_count)<span style=color:#666> </span>/<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>sum</span>(messages_count)::<span style=color:#24909d>float</span><span style=color:#666> </span>&lt;=<span style=color:#666> </span><span style=color:#3677a9>0</span>.<span style=color:#3677a9>50</span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>then</span><span style=color:#666> </span><span style=color:#ed9d13>&#39;failing&#39;</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>        </span><span style=color:#6ab825;font-weight:700>else</span><span style=color:#666> </span><span style=color:#ed9d13>&#39;partially passing&#39;</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>end</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>status,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>to_char(<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>        </span><span style=color:#6ab825;font-weight:700>sum</span>(messages_count)<span style=color:#666> </span>/<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>sum</span>(<span style=color:#6ab825;font-weight:700>count</span>)::<span style=color:#24909d>float</span><span style=color:#666> </span>*<span style=color:#666> </span><span style=color:#3677a9>100</span>.<span style=color:#3677a9>0</span>,<span style=color:#666> </span><span style=color:#ed9d13>&#39;999D9%&#39;</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>passing_pct,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>sum</span>(messages_count)<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>as</span><span style=color:#666> </span>total_messages_count,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>group_originating_and_geo_by_day_ids<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>where</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>day_id<span style=color:#666> </span>&gt;=<span style=color:#666> </span><span style=color:#3677a9>20191001</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>day_id<span style=color:#666> </span>&lt;=<span style=color:#666> </span><span style=color:#3677a9>20191231</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>account_slug<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#ed9d13>&#39;sales-demos&#39;</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>originating_esp_slug<span style=color:#666> </span>!=<span style=color:#666> </span><span style=color:#ed9d13>&#39;internal&#39;</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>and</span><span style=color:#666> </span>originating_esp_slug<span style=color:#666> </span>!=<span style=color:#666> </span><span style=color:#ed9d13>&#39;unknown&#39;</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>group</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>day_id,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>dmarc_policy_org_domain,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>originating_esp_slug<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>order</span><span style=color:#666> </span><span style=color:#6ab825;font-weight:700>by</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>day_id<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>desc</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>limit</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#3677a9>1000</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span>;<span style=color:#666>
</span></span></span></code></pre></div><h4 id=advanced---window-functions-sql>Advanced - Window Functions SQL</h4><blockquote><p>A window function performs a calculation across a set of table rows that are somehow related to the current row. This is comparable to the type of calculation that can be done with an aggregate function. However, window functions do not cause rows to become grouped into a single output row like non-window aggregate calls would. Instead, the rows retain their separate identities. Behind the scenes, the window function is able to access more than just the current row of the query result.</p></blockquote><blockquote><p>Here is an example that shows how to compare each employee&rsquo;s salary with the average salary in his or her department:</p></blockquote><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>depname,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>empno,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>salary,<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span><span style=color:#6ab825;font-weight:700>avg</span>(salary)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span>OVER<span style=color:#666> </span>(PARTITION<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>BY</span><span style=color:#666> </span>depname)<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>FROM</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>    </span>empsalary;<span style=color:#666>
</span></span></span></code></pre></div><h4 id=vacuum>VACUUM</h4><p>Why <code>VACUUM</code>?</p><blockquote><p>In normal PostgreSQL operation, tuples that are deleted or obsoleted by an
update are not physically removed from their table; they remain present until
a VACUUM is done. Therefore it&rsquo;s necessary to do VACUUM periodically,
especially on frequently-updated tables.
(<a href=https://www.postgresql.org/docs/11/sql-vacuum.html>reference</a>)</p></blockquote><p><code>VACUUM ANALYZE</code> performs a <code>VACUUM</code> and then an <code>ANALYZE</code> for each selected
table.</p><p><code>ANALYZE</code> updates statistics used by the planner to determine the most efficient
way to execute a query.</p><p><code>VACUUM FULL</code> reclaims more space, but takes much longer and <strong>exclusively locks
the table</strong>. This method also requires extra disk space, since it writes a new
copy of the table and doesn&rsquo;t release the old copy until the operation is
complete.</p><h4 id=admin-sql>Admin SQL</h4><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#999;font-style:italic>-- Cancel a query
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>SELECT</span><span style=color:#666> </span>pg_cancel_backend(&lt;query_id&gt;);<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#999;font-style:italic>-- Get role members and grantors
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span><span style=color:#6ab825;font-weight:700>select</span><span style=color:#666> </span>a.roleid,<span style=color:#666> </span>b.rolname<span style=color:#666> </span>rolename,<span style=color:#666> </span>a.member,<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>c</span>.rolname<span style=color:#666> </span>membername,<span style=color:#666> </span>a.grantor,<span style=color:#666> </span>d.usename<span style=color:#666> </span>grantorname,<span style=color:#666> </span>a.admin_option<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>from</span><span style=color:#666> </span>pg_auth_members<span style=color:#666> </span>a<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>join</span><span style=color:#666> </span>pg_roles<span style=color:#666> </span>b<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>on</span><span style=color:#666> </span>a.roleid<span style=color:#666> </span>=<span style=color:#666> </span>b.oid<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>join</span><span style=color:#666> </span>pg_roles<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>c</span><span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>on</span><span style=color:#666> </span>a.member<span style=color:#666> </span>=<span style=color:#666> </span><span style=color:#6ab825;font-weight:700>c</span>.oid<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>join</span><span style=color:#666> </span>pg_user<span style=color:#666> </span>d<span style=color:#666>
</span></span></span><span style=display:flex><span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>on</span><span style=color:#666> </span>a.grantor<span style=color:#666> </span>=<span style=color:#666> </span>d.usesysid;<span style=color:#666>
</span></span></span></code></pre></div><h4 id=references-for-sql>References for SQL</h4><ul><li><a href=https://www.postgresql.org/docs/current/>PostgreSQL Docs</a><ul><li><a href=https://www.postgresql.org/docs/current/sql.html>SQL Syntax</a></li></ul></li><li><a href=https://explain.depesz.com/>EXPLAIN - depesz</a></li><li><a href=/postgres>Postgres post - Brian Sigafoos</a></li></ul><p>Jump to <a href=#go>Go</a> 路 <a href=#javascript>Javascript</a> 路 <a href=#rails>Rails</a> 路 <a href=#ruby>Ruby</a> 路 <a href=#sql>SQL</a></p><div class="border-t border-b border-gray text-muted my-8 py-4">Read more posts like this in the
<a href=/software-engineering-toolbox>Software Engineering Toolbox</a> collection.</div></div><div class=my-8><a href=https://briansigafoos.com/ class="text-base inline-block mb-1 py-2 px-6 cursor-pointer font-mono font-bold text-primary border border-solid border-primary bg-bright no-underline">Visit homepage</a></div><div class=my-8><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//briansigafoos.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class="border-t border-gray py-4 my-16 w-full text-sm text-faint"><div class="container max-w-4xl text-center font-mono"><div class="sm:flex items-center justify-between"><span>Made with
<a href=https://gohugo.io rel=nofollow target=hugo class=underline>Hugo</a> &
        <a href=https://tailwindcss.com rel=nofollow target=tw class=underline>TailwindCSS</a>
路
<a href=https://github.com/BrianSigafoos/hugo_site rel=nofollow target=source class=underline>Source code</a></span>
<span class="block sm:inline mt-2 sm:mt-0">By <a href=/about class="text-primary font-black">Brian Sigafoos</a></span></div></div></div></body></html>